{"ast":null,"code":"import axios from 'axios';\nimport { mockLogin, mockUsers } from '../utils/mockData';\nconst USER_SERVICE_URL = 'http://localhost:8082'; // UserService port\nconst AUTH_SERVICE_URL = 'http://localhost:8081'; // AuthService port\n\nconst userApi = axios.create({\n  baseURL: USER_SERVICE_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\nconst authApi = axios.create({\n  baseURL: AUTH_SERVICE_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Add token to requests\n[userApi, authApi].forEach(api => {\n  api.interceptors.request.use(config => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  });\n});\nexport const authService = {\n  login: async credentials => {\n    try {\n      // Try UserService for authentication\n      const response = await userApi.get('/users/login', {\n        params: {\n          email: credentials.username,\n          password: credentials.password\n        }\n      });\n      const mockToken = 'mock-jwt-token-' + Date.now();\n      return {\n        data: {\n          token: mockToken,\n          user: response.data\n        }\n      };\n    } catch (error) {\n      // Fallback to mock authentication for development\n      console.warn('Backend not available, using mock authentication');\n      return mockLogin(credentials.username, credentials.password);\n    }\n  },\n  signup: async userData => {\n    try {\n      const response = await userApi.post('/users/register', {\n        username: userData.username,\n        email: userData.email,\n        phone: userData.phone,\n        password: userData.password,\n        role: userData.role\n      });\n      const mockToken = 'mock-jwt-token-' + Date.now();\n      return {\n        data: {\n          token: mockToken,\n          user: response.data\n        }\n      };\n    } catch (error) {\n      // Fallback to mock signup for development\n      console.warn('Backend not available, using mock signup');\n      const newUser = {\n        id: Date.now(),\n        ...userData\n      };\n      return {\n        data: {\n          token: 'mock-jwt-token-' + Date.now(),\n          user: newUser\n        }\n      };\n    }\n  },\n  refreshToken: () => authApi.post('/auth/refresh')\n};","map":{"version":3,"names":["axios","mockLogin","mockUsers","USER_SERVICE_URL","AUTH_SERVICE_URL","userApi","create","baseURL","headers","authApi","forEach","api","interceptors","request","use","config","token","localStorage","getItem","Authorization","authService","login","credentials","response","get","params","email","username","password","mockToken","Date","now","data","user","error","console","warn","signup","userData","post","phone","role","newUser","id","refreshToken"],"sources":["C:/Users/hp/OneDrive/Desktop/OneIndiaPayBackEnd/frontend/src/services/authService.js"],"sourcesContent":["import axios from 'axios';\nimport { mockLogin, mockUsers } from '../utils/mockData';\n\nconst USER_SERVICE_URL = 'http://localhost:8082'; // UserService port\nconst AUTH_SERVICE_URL = 'http://localhost:8081'; // AuthService port\n\nconst userApi = axios.create({\n  baseURL: USER_SERVICE_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\nconst authApi = axios.create({\n  baseURL: AUTH_SERVICE_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Add token to requests\n[userApi, authApi].forEach(api => {\n  api.interceptors.request.use((config) => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  });\n});\n\nexport const authService = {\n  login: async (credentials) => {\n    try {\n      // Try UserService for authentication\n      const response = await userApi.get('/users/login', {\n        params: {\n          email: credentials.username,\n          password: credentials.password\n        }\n      });\n      \n      const mockToken = 'mock-jwt-token-' + Date.now();\n      return {\n        data: {\n          token: mockToken,\n          user: response.data\n        }\n      };\n    } catch (error) {\n      // Fallback to mock authentication for development\n      console.warn('Backend not available, using mock authentication');\n      return mockLogin(credentials.username, credentials.password);\n    }\n  },\n  signup: async (userData) => {\n    try {\n      const response = await userApi.post('/users/register', {\n        username: userData.username,\n        email: userData.email,\n        phone: userData.phone,\n        password: userData.password,\n        role: userData.role\n      });\n      \n      const mockToken = 'mock-jwt-token-' + Date.now();\n      return {\n        data: {\n          token: mockToken,\n          user: response.data\n        }\n      };\n    } catch (error) {\n      // Fallback to mock signup for development\n      console.warn('Backend not available, using mock signup');\n      const newUser = {\n        id: Date.now(),\n        ...userData\n      };\n      \n      return {\n        data: {\n          token: 'mock-jwt-token-' + Date.now(),\n          user: newUser\n        }\n      };\n    }\n  },\n  refreshToken: () => authApi.post('/auth/refresh'),\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}